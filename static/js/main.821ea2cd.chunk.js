(this["webpackJsonpstore-app"]=this["webpackJsonpstore-app"]||[]).push([[0],{164:function(t,e,a){"use strict";a.r(e);var r=a(1),c=a(0),n=a.n(c),o=a(26),s=a.n(o),i=a(3),l=a(13),j=(a(75),n.a.createContext()),d=a(16),u=a.n(d),b=a(28),O=a(29),m=a(30),p=function(){function t(){Object(O.a)(this,t),this.fetchItem=Object(b.a)(u.a.mark((function t(){var e,a;return u.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,fetch("https://api.poe.watch/get?category=weapon&league=Standard");case 2:return e=t.sent,t.next=5,e.json();case 5:return a=t.sent,t.abrupt("return",a);case 7:case"end":return t.stop()}}),t)})))}return Object(m.a)(t,[{key:"getData",value:function(){return[{id:1,item:"Tabula Rasa",type:"Body Armour",price:100},{id:2,item:"Solaris Lorica",type:"Body Armour",price:34},{id:3,item:"Stormcharger",type:"Boots",price:1e3},{id:4,item:"Ezomyte Hold",type:"Helmets",price:12},{id:5,item:"Hold",type:"Boots",price:129}]}}]),t}(),h=a(65),x=a(64);var C=function(t){Object(h.a)(a,t);var e=Object(x.a)(a);function a(){var t;Object(O.a)(this,a);for(var r=arguments.length,c=new Array(r),n=0;n<r;n++)c[n]=arguments[n];return(t=e.call.apply(e,[this].concat(c))).state={hasError:!1},t}return Object(m.a)(a,[{key:"componentDidCatch",value:function(){this.setState({hasError:!0})}},{key:"render",value:function(){return this.state.hasError?Object(r.jsx)("errorIndicator",{}):this.props.children}}]),a}(c.Component),f=a(10),v=a(62),y=a(46),I=a(5),g=a(63),N=a.n(g),E="ADD_CART",k="DECREASE_COUNT_ITEM",P="REMOVE_ITEM_FROM_CART",T="EMPTY_CART",S="ITEMS_REQUESTED",w="ITEMS_LOADED",_="ITEMS_ERROR",F={cartItems:[],totalPrice:0,totalCartCount:0},U=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:F,e=arguments.length>1?arguments[1]:void 0;switch(e.type){case E:var a=Object(I.a)({},e.payload),r=t.cartItems.find((function(t){return a.id===t.id}));return r?(r.cartCount+=1,r.priceInCart+=a.exalted,r.priceInCart=+r.priceInCart.toFixed(2),Object(I.a)(Object(I.a)({},t),{},{totalPrice:+(t.totalPrice+a.exalted).toFixed(2),totalCartCount:t.totalCartCount+1})):(a.cartCount=1,a.priceInCart=a.exalted,a.priceInCart=+a.priceInCart.toFixed(2),Object(I.a)(Object(I.a)({},t),{},{cartItems:[].concat(Object(y.a)(t.cartItems),[a]),totalPrice:+(a.exalted+t.totalPrice).toFixed(2),totalCartCount:t.totalCartCount+1}));case k:var c=t.cartItems.filter((function(t){return e.payload.id!==t.id})),n=t.cartItems.findIndex((function(t){return e.payload.id===t.id}));if(t.cartItems[n].cartCount>1){var o=Object(I.a)(Object(I.a)({},e.payload),{},{cartCount:e.payload.cartCount-1,priceInCart:+(e.payload.priceInCart-e.payload.exalted).toFixed(2)});return Object(I.a)(Object(I.a)({},t),{},{cartItems:[].concat(Object(y.a)(c),[o]),totalPrice:+(t.totalPrice-e.payload.exalted).toFixed(2),totalCartCount:t.totalCartCount-1})}return{cartItems:c,totalPrice:+(t.totalPrice-e.payload.exalted).toFixed(2),totalCartCount:t.totalCartCount-1};case P:var s=t.cartItems.slice();N()(s,(function(t){return t.id===e.payload.id}));var i=t.totalPrice-e.payload.priceInCart,l=t.totalCartCount-e.payload.cartCount;return e.payload.exalted=0,e.payload.cartCount=0,Object(I.a)(Object(I.a)({},t),{},{cartItems:s,totalPrice:+i.toFixed(2),totalCartCount:l});case T:return Object(I.a)(Object(I.a)({},t),{},{cartItems:[],totalPrice:0,totalCartCount:0});default:return t}},R=function(t,e){if(void 0===t)return{items:[],loading:!0,error:null};switch(e.type){case S:return{items:[],loading:!0,error:null};case w:return{items:e.payload,loading:!1,error:null};case _:return{items:[],loading:!1,error:e.payload};case"DONE":return console.log("done"),Object(I.a)({},t);default:return t}},D=Object(f.c)({UpdateShopingCart:U,UpdateItems:R}),A=new f.e(D,Object(f.d)(Object(f.a)(v.a),window.__REDUX_DEVTOOLS_EXTENSION__&&window.__REDUX_DEVTOOLS_EXTENSION__())),M=a(4);function B(t){var e=t.totalPrice,a=t.cartItems,c=t.decreaseCountItemInCart,o=(t.removeItemFromCart,t.addToCart),s=t.totalCartCount,i=n.a.useCallback((function(t,e){var a=t.name,n=(t.priceInCart,t.cartCount),s=t.icon,i=t.category;return Object(r.jsxs)("div",{className:"card",children:[Object(r.jsx)("div",{className:"cart-img-container",children:Object(r.jsx)("img",{className:"card-img-top",src:s,alt:"Card image cap"})}),Object(r.jsxs)("div",{className:"card-body",children:[Object(r.jsxs)("h5",{className:"card-title",children:[" ",a]}),Object(r.jsx)("p",{className:"card-text",children:i}),Object(r.jsx)("button",{className:"fas fa-angle-left",onClick:function(){return c(t)}}),Object(r.jsx)("span",{className:"cart-item-count",children:n}),Object(r.jsx)("button",{className:"fas fa-angle-right",onClick:function(){return o(t)}})]})]})}),[c,o]),l=n.a.useCallback((function(){return Object(r.jsxs)("table",{className:"table",children:[Object(r.jsx)("thead",{className:"thead-dark",children:Object(r.jsxs)("tr",{children:[Object(r.jsx)("th",{scope:"col",children:"Items in cart"}),Object(r.jsx)("th",{scope:"col",children:"Total price"})]})}),Object(r.jsxs)("tbody",{children:[Object(r.jsxs)("tr",{children:[Object(r.jsx)("td",{children:Object(r.jsx)("span",{children:s})}),Object(r.jsx)("td",{children:Object(r.jsxs)("span",{children:[e,"ex"]})},e)]},s),Object(r.jsxs)("tr",{children:[Object(r.jsx)("td",{}),Object(r.jsx)("td",{children:Object(r.jsx)("button",{type:"button",className:"btn btn-dark",children:"ORDER"})})]})]})]})}),[s,e]);return Object(r.jsx)("div",{className:"home-page",children:Object(r.jsxs)("div",{className:"cart-container",children:[Object(r.jsx)("div",{className:"cards-container",children:a?a.map(i):null}),Object(r.jsx)("div",{className:"total-info-container",children:a.length>0?l():Object(r.jsx)("span",{children:"Cart is empty"})})]})})}var L=n.a.memo(B),X=n.a.memo((function(t){var e=t.item,a=t.addToCart;return Object(r.jsxs)(n.a.Fragment,{children:[Object(r.jsx)(l.b,{to:"#",children:e.name}),Object(r.jsx)("div",{className:"img-container",children:Object(r.jsx)("img",{src:e.icon,alt:e.name})}),Object(r.jsxs)("p",{children:["Price:",e.exalted]}),Object(r.jsx)("button",{className:"btn btn-primary add-cart",onClick:function(){return a(e)},children:"Add in cart"})]})})),H=function(t){return{type:E,payload:t}},V=function(t){return{type:k,payload:t}},J=function(t){return{type:P,payload:t}},z=n.a.memo((function(t){var e=t.item,a=Object(i.b)(),n=Object(c.useCallback)((function(t){return a(H(e))}),[a,e]);return Object(r.jsx)(X,{item:e,addToCart:n})}));var Q=function(t){return Object(r.jsx)("div",{className:"spinner-border",role:"status",children:Object(r.jsx)("span",{className:"sr-only",children:"Loading..."})})};function Y(t){var e=t.items,a=t.loading,c=t.error;return a?Object(r.jsx)(Q,{}):c?Object(r.jsx)("div",{className:"error-container",children:Object(r.jsx)("i",{className:"fas fa-exclamation-triangle"})}):Object(r.jsx)("ul",{className:"item-list",children:e.map((function(t){return Object(r.jsx)("li",{className:"item",children:Object(r.jsx)(z,{item:t})},t.id)}))})}var q=n.a.memo(Y);function G(){var t=Object(i.b)(),e=Object(i.c)((function(t){return t.UpdateItems.items})),a=Object(i.c)((function(t){return t.UpdateItems.loading})),o=Object(i.c)((function(t){return t.UpdateItems.error})),s=Object(c.useCallback)((function(e){return t(function(){var t=Object(b.a)(u.a.mark((function t(e){var a,r;return u.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,new p,e({type:S}),t.next=5,fetch("https://api.poe.watch/get?category=weapon&league=Standard");case 5:return a=t.sent,t.next=8,a.json();case 8:r=t.sent,e((n=r.splice(0,12),{type:w,payload:n})),t.next=15;break;case 12:t.prev=12,t.t0=t.catch(0),e((c=t.t0,{type:_,payload:c}));case 15:case"end":return t.stop()}var c,n}),t,null,[[0,12]])})));return function(e){return t.apply(this,arguments)}}())}),[t]);return n.a.useEffect((function(){var t=!1;return!t&&s(),function(){t=!0}}),[]),Object(r.jsx)(q,{items:e,loading:a,error:o})}var K=n.a.memo(G),W=n.a.memo((function(t){var e=t.totalPrice,a=t.decreaseCountItemInCart,c=t.removeItemFromCart,o=t.cartItems,s=t.addToCart,i=n.a.useCallback((function(t,e){var n=t.name,o=t.priceInCart,i=t.cartCount;if(i)return Object(r.jsxs)("tr",{children:[Object(r.jsx)("th",{scope:"row",children:e+1}),Object(r.jsx)("td",{children:n}),Object(r.jsx)("td",{children:i}),Object(r.jsxs)("td",{children:[o,"ex"]}),Object(r.jsxs)("td",{className:"shop-list-btn",children:[Object(r.jsx)("button",{className:"fas fa-plus btn btn-outline-primary",onClick:function(){return s(t)}}),Object(r.jsx)("button",{className:"fas fa-minus btn btn-outline-warning",onClick:function(){return a(t)}}),Object(r.jsx)("button",{className:"fas fa-trash-alt btn btn-outline-danger",onClick:function(){return c(t)}})]})]},e)}),[s,a,c]),l=n.a.useCallback((function(){return Object(r.jsxs)("div",{className:"shop-list-container",children:[Object(r.jsxs)("p",{children:["Total:",e,"ex"]}),Object(r.jsxs)("table",{className:"table",children:[Object(r.jsx)("thead",{className:"thead-light",children:Object(r.jsxs)("tr",{children:[Object(r.jsx)("th",{scope:"col",children:"#"}),Object(r.jsx)("th",{scope:"col",children:"Item"}),Object(r.jsx)("th",{scope:"col",children:"Count"}),Object(r.jsx)("th",{scope:"col",children:"Price"}),Object(r.jsx)("th",{scope:"col",children:"Action"})]})}),Object(r.jsx)("tbody",{children:o.map(i)})]})]})}),[o,i,e]);return Object(r.jsx)(n.a.Fragment,{children:o.length>0?l():null})}));var Z=function(){var t=Object(i.b)(),e=Object(i.c)((function(t){return t.UpdateShopingCart.cartItems})),a=Object(i.c)((function(t){return t.UpdateShopingCart.totalPrice})),n=Object(c.useCallback)((function(e){return t(H(e))}),[t]),o=Object(c.useCallback)((function(e){return t(V(e))}),[t]),s=Object(c.useCallback)((function(e){return t(J(e))}),[t]);return Object(r.jsx)(W,{cartItems:e,totalPrice:a,decreaseCountItemInCart:o,removeItemFromCart:s,addToCart:n})};var $=function(){return Object(r.jsxs)("div",{className:"home-page",children:[Object(r.jsx)(K,{}),Object(r.jsx)(Z,{})]})};function tt(t){var e=t.totalCartCount;t.totalPrice,t.emptyCart;return Object(r.jsxs)("header",{className:"header",children:[Object(r.jsx)(l.b,{to:"/",children:"POE-Store"}),Object(r.jsx)("div",{className:"cart-container",children:Object(r.jsxs)(l.b,{to:"cart",children:[Object(r.jsx)("i",{className:"cart-icon fa fa-shopping-cart",children:" "}),Object(r.jsx)("i",{className:"cart-item-info cart-total-price",children:e?Object(r.jsx)("p",{className:"badge badge-light cart-count",children:e}):null})]})})]})}var et=n.a.memo(tt),at=function(){var t=Object(i.b)(),e=Object(i.c)((function(t){return t.UpdateShopingCart.totalCartCount})),a=Object(i.c)((function(t){return t.UpdateShopingCart.totalPrice})),o=Object(c.useCallback)((function(){return t({type:T})}),[t]);return Object(r.jsx)(n.a.Fragment,{children:Object(r.jsx)(et,{totalCartCount:e,totalPrice:a,emptyCart:o})})},rt=n.a.memo(at);function ct(){var t=Object(i.b)(),e=Object(i.c)((function(t){return t.UpdateShopingCart.totalPrice})),a=Object(i.c)((function(t){return t.UpdateShopingCart.cartItems})),o=Object(i.c)((function(t){return t.UpdateShopingCart.totalCartCount})),s=Object(c.useCallback)((function(e){return t(V(e))}),[t]),l=Object(c.useCallback)((function(e){return t(J(e))}),[t]),j=Object(c.useCallback)((function(e){return t(H(e))}),[t]);return Object(r.jsx)(n.a.Fragment,{children:Object(r.jsx)(L,{totalPrice:e,cartItems:a,decreaseCountItemInCart:s,removeItemFromCart:l,addToCart:j,totalCartCount:o})})}var nt=n.a.memo(ct);var ot=function(){return Object(r.jsxs)("div",{className:"main-container",children:[Object(r.jsx)(rt,{}),Object(r.jsxs)(M.c,{children:[Object(r.jsx)(M.a,{path:"/",exact:!0,component:$}),Object(r.jsx)(M.a,{path:"/cart",exact:!0,component:nt}),Object(r.jsx)(M.a,{render:function(){return Object(r.jsx)("h1",{children:"Page not found"})}})]})]})},st=new p;s.a.render(Object(r.jsx)(i.a,{store:A,children:Object(r.jsx)(C,{children:Object(r.jsx)(j.Provider,{value:st,children:Object(r.jsx)(l.a,{children:Object(r.jsx)(ot,{})})})})}),document.getElementById("root"))},75:function(t,e,a){}},[[164,1,2]]]);
//# sourceMappingURL=main.821ea2cd.chunk.js.map